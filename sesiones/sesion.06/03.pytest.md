# PYTEST

## 1Ô∏è‚É£ Introducci√≥n

### ‚úÖ ¬øQu√© es `pytest`?

Es un framework de testing para Python:

* M√°s potente y legible que `unittest`.
* Sin necesidad de clases o herencia.
* Plugins para cobertura, mocks, testing paralelo, etc.

---

## 2Ô∏è‚É£ Instalaci√≥n y Primeros Pasos

```bash
pip install pytest
```

Crear archivo `test_basico.py`:

```python
# test_basico.py

def test_suma():
    assert 2 + 2 == 4

def test_fallo():
    assert 2 * 2 == 5  # este fallar√°
```

### ‚ñ∂ Ejecutar:

```bash
pytest
```

---

## 3Ô∏è‚É£ Estructura y Convenciones

* Archivos deben llamarse `test_*.py`
* Funciones de test: `def test_algo():`
* `assert` se usa directamente.

---

## 4Ô∏è‚É£ Organizaci√≥n recomendada

```
mi_proyecto/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ calculadora.py
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ test_calculadora.py
```

---

## 5Ô∏è‚É£ Tests con Fixtures

```python
import pytest

@pytest.fixture
def usuario():
    return {"nombre": "Ana", "edad": 30}

def test_usuario(usuario):
    assert usuario["nombre"] == "Ana"
    assert usuario["edad"] > 18
```

---

## 6Ô∏è‚É£ Manejo de excepciones

```python
import pytest

def dividir(a, b):
    return a / b

def test_division_por_cero():
    with pytest.raises(ZeroDivisionError):
        dividir(10, 0)
```

---

## 7Ô∏è‚É£ Clases de test

```python
class TestCalculadora:
    def test_suma(self):
        assert 1 + 2 == 3

    def test_resta(self):
        assert 5 - 3 == 2
```

---

## 8Ô∏è‚É£ Parametrizaci√≥n

```python
import pytest

@pytest.mark.parametrize("a,b,resultado", [
    (2, 3, 5),
    (1, 1, 2),
    (-1, 1, 0)
])
def test_suma_param(a, b, resultado):
    assert a + b == resultado
```

---

## 9Ô∏è‚É£ Comandos √∫tiles

```bash
pytest              # ejecuta todo
pytest -v           # modo verboso
pytest -x           # se detiene en el primer fallo
pytest tests/       # solo carpeta tests
pytest test_mod.py::test_funcion
```

---

## üîü Extensiones √∫tiles

* `pytest-cov` ‚Üí cobertura de tests
* `pytest-mock` ‚Üí mocking
* `pytest-django` ‚Üí integraci√≥n con Django
* `pytest-asyncio` ‚Üí tests con async

Instalar cobertura:

```bash
pip install pytest-cov
pytest --cov=src/
```

---

## üß© Mini Ejercicios

1. **Crear prueba simple** para una funci√≥n que calcula el doble de un n√∫mero.
2. **Probar excepci√≥n** para una divisi√≥n por cero.
3. **Usar fixture** para simular un usuario.
4. **Hacer test parametrizado** con distintos pares de suma.

---

## üìö Recursos adicionales

* [Documentaci√≥n oficial](https://docs.pytest.org)
* [pytest-examples](https://github.com/pytest-dev/pytest-examples)
* [Awesome Pytest (GitHub)](https://github.com/augustogoulart/awesome-pytest)

---

## üß† Actividad final

Crea un archivo `calculadora.py` con funciones `suma`, `resta`, `multiplicacion` y `division`. Luego:

1. Escribe tests para cada funci√≥n.
2. Aseg√∫rate de cubrir al menos 3 casos por operaci√≥n.
3. Ejecuta con cobertura (`pytest --cov`).